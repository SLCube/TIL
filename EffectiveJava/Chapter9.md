# 일반적인 프로그래밍 원칙

## item57 지역변수의 범위를 최소화하라
c언어와 같이 역사가 깊은 언어들에서 지역변수를 선언할 때 코드블록의 첫머리에 선언하는 경우가 많고, 지금도 이 방식을 습관처럼 따르는 프로그래머들이 많다. 

지역변수의 범위를 줄이는 가장 강력한 방법은 가장 처음 쓰일때 선언하는 것이다. 추가로 거의 모든 지역변수를 선언과 동시에 초기화를 해야한다.

이렇게 간단한 원칙이지만 반복문에선 조금 독특한 방식으로 변수 범위를 최소화해준다.

프로그래밍 공부를 처음할때 while문과 for문의 본질적인 차이를 이해하지 못했다. 

```java
int i = 0;
while(i < 10) {
    // 어쩌구 저쩌구
    i++;
}

int i2 = 0;
while(i < 10) {
    // 어쩌구 저쩌구
    i2++;
}
```

개발자의 실수로 두번째 while문에서 반복변수를 i2가 아닌 i를 사용했고 두번째 반복문은 실행이 되지 않는다. 이는 컴파일도 잘되고 실행시 예외를 터뜨리지 않는다. 두번째 반복문이 정말 드물게 실행되는 코드라면 해당 오류는 오랜시간 뒤에 발견될 수 있다. 

```java
for(i = 0; i < 10; i++) {
    // 어쩌구 저쩌구
}

for(i = 0; i < 10; i++) {
    // 어쩌구 저쩌구
}
```

for문을 사용하게되면 반복변수 i가 반복문이 실행될때 초기화되고 반복문이 끝날때 소멸된다. 

지역변수의 범위를 최소화하는 마지막 방법은 메소드를 작게 유지하는 것이다. 한 메소드가 여러기능을 한다면 그중 한 기능과 관련된 지역변수라도 다른 기능에서 접근이 가능하다. 기능단위로 메소드를 쪼개면 지역변수와 관련된 오류를 잡는데 큰 도움이 될것이다.

## item58 전통적인 for문보다 for-each문을 사용하라

다음은 전통적인 for문을 이용해 컬렉션과 배열을 순회하는 코드이다. 

```java
for(i = 0; i < list.size(); i++) {
    //...
}

for(i = 0; i < arr.length; i++) {
    //arr[i]...
}
```

while문보다는 확실히 좋지만 문제가 몇몇 보인다. 반복변수는 해당 기능에 필요가 없는 경우가 많다. 우리가 정말로 필요한건 컬렉션과 배열안에 있는 원소일뿐 그들의 인덱스번호가 아니기 때문이다. 컬렉션 반복문에선 i가 3번 배열 반복문에선 4번 등장한다. 향상된 for문으로 고쳐보자

```java
for(Element e : elements) {
    // ...
}
```

for each문을 사용할 수 없는 상황은 세가지가 있다. 
1. 컬렉션을 순회하면서 해당 원소를 제거해야한다면 해당 컬렉션의 인덱스가 필요하다.
2. 리스트나 배열을 순회하면서 원소의 값을 변경하려면 인덱스가 필요하다. 
3. 여러 컬렉션을 병렬로 순회해야한다면 각각의 반복자와 인덱스 변수를 엄격하게 관리하면서 사용해야한다. 